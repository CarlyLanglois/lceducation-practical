<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>13.6. TDD in Action &#8212; Introduction to Professional Web Development in JavaScript  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="13.7. Exercises: Unit Testing" href="exercises.html" />
    <link rel="prev" title="13.5. Test-Driven Development" href="tdd.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
        </a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html">13. Unit Testing</a></li>
    <li class="active">13.6. TDD in Action</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="tdd-in-action">
<h1>13.6. TDD in Action<a class="headerlink" href="#tdd-in-action" title="Permalink to this headline">¶</a></h1>
<p>Fork <a class="reference external" href="https://repl.it/&#64;launchcode/Transmission-processor-TDD-starter" target="_blank">this repl.it<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>
and follow along as we implement a project using TDD.</p>
<p>We need to write a Node module to process transmissions from the
<a class="reference external" href="https://voyager.jpl.nasa.gov/mission/" target="_blank">Voyager1 probe<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
<div class="admonition-example admonition">
<p class="first admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>Transmission</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;1410::&lt;932829840830053761&gt;&quot;</span>
</pre></div>
</div>
<p>Expected Result</p>
<div class="last highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nx">id</span><span class="o">:</span> <span class="mi">1410</span><span class="p">,</span>
   <span class="nx">rawData</span><span class="o">:</span> <span class="mi">932829840830053761</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="requirements">
<h2>13.6.1. Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The features for this project have already been broken down into
small testable units. Let’s review these and then we will
take it slow and handle these one at a time.</p>
<ol class="arabic simple">
<li>Take in a transmission string and return an object <code class="docutils literal notranslate"><span class="pre">{}</span></code>.</li>
<li>Return <code class="docutils literal notranslate"><span class="pre">-1</span></code> if the transmission does NOT contain <code class="docutils literal notranslate"><span class="pre">&quot;::&quot;</span></code>.</li>
<li>Returned object should contain an <code class="docutils literal notranslate"><span class="pre">id</span></code> property<ul>
<li>The <code class="docutils literal notranslate"><span class="pre">id</span></code> is the part of the transmission <em>before</em> the <code class="docutils literal notranslate"><span class="pre">&quot;::&quot;</span></code></li>
</ul>
</li>
<li>The <code class="docutils literal notranslate"><span class="pre">id</span></code> property should be of type <code class="docutils literal notranslate"><span class="pre">Number</span></code></li>
<li>Returned object should contain a <code class="docutils literal notranslate"><span class="pre">rawData</span></code> property<ul>
<li>The <code class="docutils literal notranslate"><span class="pre">rawData</span></code> is the part of the transmission <em>after</em> the <code class="docutils literal notranslate"><span class="pre">&quot;::&quot;</span></code></li>
</ul>
</li>
<li>Return -1 if the <code class="docutils literal notranslate"><span class="pre">rawData</span></code> part of the transmission does NOT start with <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and end with <code class="docutils literal notranslate"><span class="pre">&gt;</span></code></li>
</ol>
</div>
<div class="section" id="requirement-1">
<h2>13.6.2. Requirement #1<a class="headerlink" href="#requirement-1" title="Permalink to this headline">¶</a></h2>
<p><strong>Requirement:</strong> Take in a transmission string and return an object <code class="docutils literal notranslate"><span class="pre">{}</span></code>.</p>
<p>To get started on this we need to:</p>
<ol class="loweralpha simple">
<li>Create a blank test function.</li>
<li>Give the test a name that describes that behavior the test verify.</li>
</ol>
<p>Creating a blank test is easy, go to <code class="docutils literal notranslate"><span class="pre">processor.spec.js</span></code> and add an empty test method.</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;assert&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;data-processor&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>

   <span class="p">});</span>

<span class="p">});</span>
</pre></div>
</td></tr></table></div>
<p>Now we need to give the test a name that is a clear, testable statement that
describes the behavior of the feature we are testing. Give the test
the name <code class="docutils literal notranslate"><span class="pre">&quot;takes</span> <span class="pre">a</span> <span class="pre">string</span> <span class="pre">returns</span> <span class="pre">an</span> <span class="pre">object&quot;</span></code>.</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;assert&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;transmission processor&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;takes a string returns an object&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

   <span class="p">});</span>

<span class="p">});</span>
</pre></div>
</td></tr></table></div>
<p>Now that we have a clear goal for this test, we can add logic and <code class="docutils literal notranslate"><span class="pre">assert</span></code>
calls to verify the behavior we know should work. But wait, we haven’t added anything
except <em>test</em> code at this point. There isn’t anything to verify!</p>
<p>We are going to think about and visualize
how this feature should in code. Then we will write out in the test how
this new code will be used. Bear with it, this exercise is actually
quite useful.</p>
<p>We need think of something that will satisfy this statement
<code class="docutils literal notranslate"><span class="pre">&quot;it(&quot;takes</span> <span class="pre">a</span> <span class="pre">string</span> <span class="pre">returns</span> <span class="pre">an</span> <span class="pre">object&quot;,</span> <span class="pre">``.</span>
<span class="pre">We</span> <span class="pre">have</span> <span class="pre">to</span> <span class="pre">determine</span> <span class="pre">what</span> <span class="pre">the</span> <span class="pre">``it</span></code> is. Let’s define <code class="docutils literal notranslate"><span class="pre">it</span></code> a function named
<code class="docutils literal notranslate"><span class="pre">processor</span></code>, which is imported from a module named <code class="docutils literal notranslate"><span class="pre">processor</span></code>.</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;assert&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">processor</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../processor.js&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;transmission processor&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;takes a string returns an object&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>

   <span class="p">});</span>

<span class="p">});</span>
</pre></div>
</td></tr></table></div>
<p>We have an idea for a function named <code class="docutils literal notranslate"><span class="pre">processor</span></code> and we have imported it.
Keep in mind this function only exists as a concept and we are writing a test
to see if this concept makes sense.</p>
<p>Now the real meat of the test. We are going to use <code class="docutils literal notranslate"><span class="pre">assert.strictEqual</span></code> to
verify that if we pass a string to <code class="docutils literal notranslate"><span class="pre">processor</span></code> that an <code class="docutils literal notranslate"><span class="pre">{}</span></code> is returned.
Carefully review lines <strong>7</strong> and <strong>8</strong> shown below.</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;assert&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">processor</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../processor.js&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;transmission processor&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;takes a string returns an object&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">processor</span><span class="p">(</span><span class="s2">&quot;9701::&lt;489584872710&gt;&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">result</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">);</span>
   <span class="p">});</span>

<span class="p">});</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="code-red">
<h3>13.6.2.1. Code Red<a class="headerlink" href="#code-red" title="Permalink to this headline">¶</a></h3>
<p>Let’s run the test! Click the <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">&gt;</span></code> button in your repl.it.
You should see an error about <code class="docutils literal notranslate"><span class="pre">processor.js</span></code> not existing. And that makes sense
we were using that module before we created it. We are officially in the Red
phase of Red, Green, Refactor!</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Error: Cannot find module &#39;../processor.js&#39;
</pre></div>
</div>
</div>
<div class="section" id="go-green">
<h3>13.6.2.2. Go Green!<a class="headerlink" href="#go-green" title="Permalink to this headline">¶</a></h3>
<p>Now that we have a failing test, we have only one choice. Make it pass.</p>
<ol class="loweralpha simple">
<li>Add a <code class="docutils literal notranslate"><span class="pre">processor.js</span></code> file to your repl.it.</li>
<li>Inside of the module declare a <code class="docutils literal notranslate"><span class="pre">processor</span></code> function that takes a parameter and returns <code class="docutils literal notranslate"><span class="pre">{}</span></code>.</li>
</ol>
<p>Contents of new <code class="docutils literal notranslate"><span class="pre">processor.js</span></code> file.</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">process</span><span class="p">(</span><span class="nx">transmission</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">process</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
<div class="figure" id="id1">
<img alt="Screen shot showing processor.js file added to replit with function in it." src="../../_images/processor-module-added-to-replit.png" />
<p class="caption"><span class="caption-text">processor.js file</span></p>
</div>
<p><strong>Run the test again.</strong></p>
<p>We did it! <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">spec,</span> <span class="pre">0</span> <span class="pre">failures</span></code> means 1 passing
test. In repl.it you have to imagine the satisfying green color of a passing test.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1 spec, 0 failures
Finished in 0.011 seconds
</pre></div>
</div>
</div>
<div class="section" id="refactor-if-needed">
<h3>13.6.2.3. Refactor if Needed<a class="headerlink" href="#refactor-if-needed" title="Permalink to this headline">¶</a></h3>
<p>This solution is very simple and does not need to be improved. The refactor step
does not always lead to an actual changing of your code. The most important part is to
review your code to make sure that it’s efficient and meets your team’s standards.</p>
</div>
</div>
<div class="section" id="requirement-2">
<h2>13.6.3. Requirement #2<a class="headerlink" href="#requirement-2" title="Permalink to this headline">¶</a></h2>
<p><strong>Requirement:</strong> Return <code class="docutils literal notranslate"><span class="pre">-1</span></code> if the transmission does NOT contain <code class="docutils literal notranslate"><span class="pre">&quot;::&quot;</span></code>.</p>
<p>We will follow the same steps to write this test and eventually make it green</p>
<ol class="loweralpha simple">
<li>Create a blank test function.</li>
<li>Give the test a name that describes that behavior the test verify.</li>
<li>Think about then write code that fulfills the stated behavior.</li>
<li>Run the test and see the it fail.</li>
<li>Implement new code to make test pass.</li>
<li>Run the test and see it pass.</li>
<li>Do we need to refactor? Can the code be better?</li>
</ol>
<p>See lines <strong>11 - 14</strong> for the solution to steps a. to c.</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;assert&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">processor</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../processor.js&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;transmission processor&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;takes a string returns an object&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">processor</span><span class="p">(</span><span class="s2">&quot;9701::&lt;489584872710&gt;&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">result</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">);</span>
   <span class="p">});</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;returns -1 if &#39;::&#39; not found&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">processor</span><span class="p">(</span><span class="s2">&quot;9701&lt;489584872710&gt;&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
   <span class="p">});</span>

<span class="p">});</span>
</pre></div>
</td></tr></table></div>
<p>Error message displayed when you run the test. Notice that <code class="docutils literal notranslate"><span class="pre">-1</span></code> was
the expected value, but the actual value was <code class="docutils literal notranslate"><span class="pre">{}</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Failures:
1) transmission processor returns -1 if &#39;::&#39; not found
Message:
 AssertionError [ERR_ASSERTION]: Input A expected to strictly equal input B:
 + expected - actual

 - &#39;object&#39;
 + -1
</pre></div>
</div>
<p>Code the solution. Go to <code class="docutils literal notranslate"><span class="pre">processor.js</span></code> and update the <code class="docutils literal notranslate"><span class="pre">processor</span></code> function
to check the <code class="docutils literal notranslate"><span class="pre">transmission</span></code> argument for the presence of <code class="docutils literal notranslate"><span class="pre">'::'</span></code>.</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">process</span><span class="p">(</span><span class="nx">transmission</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">transmission</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;::&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Data is invalid</span>
      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">process</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
<p>Run the tests again. They should both pass.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2 specs, 0 failures
Finished in 0.035 seconds
</pre></div>
</div>
</div>
<div class="section" id="requirement-3">
<h2>13.6.4. Requirement #3<a class="headerlink" href="#requirement-3" title="Permalink to this headline">¶</a></h2>
<p><strong>Requirement:</strong> Returned object should contain an <code class="docutils literal notranslate"><span class="pre">id</span></code> property.
The <code class="docutils literal notranslate"><span class="pre">id</span></code> is the part of the transmission <em>before</em> the <code class="docutils literal notranslate"><span class="pre">&quot;::&quot;</span></code></p>
<p>The same steps will be followed, even though they are not explicitly listed.</p>
<p>See lines <strong>16 - 19</strong> to see the test added for this requirement.</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;assert&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">processor</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../processor.js&#39;</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;transmission processor&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;takes a string returns an object&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">processor</span><span class="p">(</span><span class="s2">&quot;9701::&lt;489584872710&gt;&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">result</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">);</span>
   <span class="p">});</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;returns -1 if &#39;::&#39; not found&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">processor</span><span class="p">(</span><span class="s2">&quot;9701&lt;489584872710&gt;&quot;</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
   <span class="p">});</span>

   <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;returns id in object&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
     <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">processor</span><span class="p">(</span><span class="s2">&quot;9701::&lt;489584872710&gt;&quot;</span><span class="p">);</span>
     <span class="nx">assert</span><span class="p">.</span><span class="nx">strictEqual</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
   <span class="p">});</span>

<span class="p">});</span>
</pre></div>
</td></tr></table></div>
<p>Fail Message</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Failures:
1) transmission processor returns id in object
Message:
AssertionError [ERR_ASSERTION]: Input A expected to strictly equal input B:
+ expected - actual

- false
+ true
</pre></div>
</div>
<p>The object returned from <code class="docutils literal notranslate"><span class="pre">processor</span></code> doesn’t have an id property. We need to
split the transmission on <code class="docutils literal notranslate"><span class="pre">'::'</span></code> and then add that value to the object with
the key <code class="docutils literal notranslate"><span class="pre">id</span></code>. See solution in <code class="docutils literal notranslate"><span class="pre">processor.js</span></code> below.</p>
<div class="highlight-js notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">process</span><span class="p">(</span><span class="nx">transmission</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">transmission</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;::&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Data is invalid</span>
      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="kd">let</span> <span class="nx">parts</span> <span class="o">=</span> <span class="nx">transmission</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;::&quot;</span><span class="p">);</span>
   <span class="k">return</span> <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
   <span class="p">};</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">process</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
<p>That did it. The tests pass. :)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>3 specs, 0 failures
Finished in 0.011 seconds
</pre></div>
</div>
</div>
<div class="section" id="requirement-4">
<h2>13.6.5. Requirement #4<a class="headerlink" href="#requirement-4" title="Permalink to this headline">¶</a></h2>
<p><strong>Requirement:</strong> The <code class="docutils literal notranslate"><span class="pre">id</span></code> property should be of type <code class="docutils literal notranslate"><span class="pre">Number</span></code></p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">THIS</p>
</div>
</div>
<div class="section" id="requirement-5">
<h2>13.6.6. Requirement #5<a class="headerlink" href="#requirement-5" title="Permalink to this headline">¶</a></h2>
<p><strong>Requirement:</strong> Returned object should contain a <code class="docutils literal notranslate"><span class="pre">rawData</span></code> property. The <code class="docutils literal notranslate"><span class="pre">rawData</span></code>
is the part of the transmission <em>after</em> the <code class="docutils literal notranslate"><span class="pre">&quot;::&quot;</span></code></p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">THIS</p>
</div>
</div>
<div class="section" id="requirement-6">
<h2>13.6.7. Requirement #6<a class="headerlink" href="#requirement-6" title="Permalink to this headline">¶</a></h2>
<p><strong>Requirement:</strong> Return -1 if the <code class="docutils literal notranslate"><span class="pre">rawData</span></code> part of the transmission does NOT
start with <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and end with <code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">THIS</p>
</div>
</div>
<div class="section" id="try-these-on-your-own">
<h2>13.6.8. Try These On Your Own<a class="headerlink" href="#try-these-on-your-own" title="Permalink to this headline">¶</a></h2>
<p>Use TDD to add these features.</p>
<ol class="arabic simple">
<li>Trim leading and trailing whitespace from transmission.</li>
<li>Return -1 if more than one <code class="docutils literal notranslate"><span class="pre">&quot;::&quot;</span></code> found in transmission</li>
<li>Return -1 for value of <code class="docutils literal notranslate"><span class="pre">rawData</span></code> if anything besides numbers are present</li>
<li>Allow for multiple <code class="docutils literal notranslate"><span class="pre">rawData</span></code> values<ul>
<li><code class="docutils literal notranslate"><span class="pre">rawData</span></code> would be returned as an array of numbers</li>
<li>Get the new test working and then fix any broken existing tests</li>
<li>Example Transmission:  <code class="docutils literal notranslate"><span class="pre">&quot;9701::&lt;21212.232323.242424&gt;&quot;</span></code></li>
<li>Result: <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">id:</span> <span class="pre">9701,</span> <span class="pre">rawData:</span> <span class="pre">[21212,232323,242424]</span> <span class="pre">}</span></code></li>
</ul>
</li>
</ol>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="tdd.html"><span aria-hidden="true">&larr;</span> 13.5. Test-Driven Development</a></li>
        
        
        <li class="next"><a href="exercises.html">13.7. Exercises: Unit Testing <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>