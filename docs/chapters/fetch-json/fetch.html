<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>24.4. Fetching Data &#8212; Introduction to Professional Web Development in JavaScript  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="25. Booster Rockets" href="../booster-rockets/index.html" />
    <link rel="prev" title="24.3. JSON" href="json.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
        </a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html">24. Fetch &amp; JSON</a></li>
    <li class="active">24.4. Fetching Data</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="fetching-data">
<h1>24.4. Fetching Data<a class="headerlink" href="#fetching-data" title="Permalink to this headline">¶</a></h1>
<p>Now that we know what an API, let’s use one to update a web page. Let’s use a weather API
to add weather data to a webpage. The URL for this special LaunchCode weather API is
<a class="reference external" href="https://api.education.launchcode.org/weather" target="_blank">https://api.education.launchcode.org/weather<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
<p>Example JSON returned from weather API.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;temp&quot;</span><span class="o">:</span> <span class="mi">67</span><span class="p">,</span>
   <span class="s2">&quot;windSpeed&quot;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
   <span class="s2">&quot;tempMin&quot;</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span>
   <span class="s2">&quot;tempMax&quot;</span><span class="o">:</span> <span class="mi">71</span><span class="p">,</span>
   <span class="s2">&quot;status&quot;</span><span class="o">:</span> <span class="s2">&quot;Sunny&quot;</span><span class="p">,</span>
   <span class="s2">&quot;chanceOfPrecipitation&quot;</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
   <span class="s2">&quot;zipcode&quot;</span><span class="o">:</span> <span class="mi">63108</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We can see that this API returns useful information like <code class="docutils literal notranslate"><span class="pre">temp</span></code> and <code class="docutils literal notranslate"><span class="pre">windSpeed</span></code>. Our goal is to
add that data to a Launch Status web page. Note this API is for instruction purposes and does not
contain real time data.</p>
<div class="admonition-example admonition">
<p class="first admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>Launch Status web page, which we will add weather data to.</p>
<div class="last highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Launch Status<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
   <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Launch Status<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Weather Conditions<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
      <span class="c">&lt;!-- TODO: dynamically add html about weather using data from API --&gt;</span>
   <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="fetch-function">
<h2>24.4.1. <code class="docutils literal notranslate"><span class="pre">fetch</span></code> Function<a class="headerlink" href="#fetch-function" title="Permalink to this headline">¶</a></h2>
<p id="index-0">To request the weather data, we will use the <code class="docutils literal notranslate"><span class="pre">fetch</span></code> function. <code class="docutils literal notranslate"><span class="pre">fetch</span></code> is a global
function that requests, or fetches, resources such as data from an API.</p>
<p>Two important parts of fetching data are:</p>
<ol class="arabic simple">
<li>The URL of where the data is located.<ul>
<li>For this example it will be <code class="docutils literal notranslate"><span class="pre">'https://api.education.launchcode.org/weather'</span></code></li>
</ul>
</li>
<li>A response handler function to utilize the data that is being fetched.</li>
</ol>
<div class="admonition-example admonition">
<p class="first admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>Notice a string URL is passed to <code class="docutils literal notranslate"><span class="pre">fetch</span></code>. Also notice the anonymous function that
has a <code class="docutils literal notranslate"><span class="pre">response</span></code> parameter, that is the request handler function. The <code class="docutils literal notranslate"><span class="pre">then</span></code>
function will be explained very soon.</p>
<div class="last highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://api.education.launchcode.org/weather&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">}</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<p>Let’s break down how <code class="docutils literal notranslate"><span class="pre">fetch</span></code> works. A URL is passed to <code class="docutils literal notranslate"><span class="pre">fetch</span></code> as a parameter, that causes
an HTTP GET request to be sent from the browser to the API. Remember that HTTP is a request then
response protocol. The response handler function, as the name implies, handles the response sent
back from the API. Using the data in the response, the web page can be updated using DOM methods.</p>
</div>
<div class="section" id="fetch-example">
<h2>24.4.2. <code class="docutils literal notranslate"><span class="pre">fetch</span></code> Example<a class="headerlink" href="#fetch-example" title="Permalink to this headline">¶</a></h2>
<p>Now let’s add <code class="docutils literal notranslate"><span class="pre">fetch</span></code> in the Launch Status web page.</p>
<div class="admonition-example admonition">
<p class="first admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>On line 4 a <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> tag has been added that includes:</p>
<ol class="arabic simple">
<li>A <em>load</em> event handler on line 5</li>
<li>A <code class="docutils literal notranslate"><span class="pre">fetch</span></code> and response handler function on line 6</li>
<li>A <code class="docutils literal notranslate"><span class="pre">console.log(response);</span></code> on line 7</li>
</ol>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Launch Status<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
         <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">fetch</span><span class="p">(</span><span class="s2">&quot;weather.json&quot;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
               <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
            <span class="p">}</span> <span class="p">);</span>
         <span class="p">});</span>
      <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
   <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Launch Status<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Weather Conditions<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
      <span class="c">&lt;!-- TODO: dynamically add html about weather using data from API --&gt;</span>
   <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p class="repl-link"><a class="reference external" href="https://repl.it/&#64;launchcode/fetch-weather-pt1" target="_blank">repl.it<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></p>
<p class="last">Open the repl.it link. Then</p>
</div>
<p>Things left to discuss
* Show example usage of fetch
* Point out the important parts of the code
* show example of network request in network tab?
* Update the web page using data from a response
* something about HTTP requests
* NOTE about seeing many other ways to request data online (jQuery.get, XmlHttpRequest, …)
* NOTE about fetch can also be used to sent POST and PUT requests. maybe link to MDN
* WARNING that fetch does NOT work in IE, be sure to say that Edge is ok. Provide link to site that helps them pick a different browser.
* In depth about Promises and asynchronous cycle of network requests
* Familiar with terms AJAX and XHR (where to do this?)</p>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="json.html"><span aria-hidden="true">&larr;</span> 24.3. JSON</a></li>
        
        
        <li class="next"><a href="../booster-rockets/index.html">25. Booster Rockets <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>